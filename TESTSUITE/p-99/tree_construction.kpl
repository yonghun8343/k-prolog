나무(나무문자열, 나무) :- atom(나무문자열), !, atom_chars(나무문자열, 문자목록), 나무_내부(문자목록-[], 나무). 
나무(나무문자열, 나무) :- nonvar(나무), 나무_내부(문자목록-[], 나무), atom_chars(나무문자열, 문자목록).

나무_내부([_첫문자|_숲문자열]-_끝문자열, t(_첫문자, _숲)) :- 숲_내부(_숲문자열-['^'|_끝문자열], _숲).

숲_내부(문자열-문자열, []).
숲_내부(문자열1-문자열3, [_나무|_숲]) :- 
    나무_내부(문자열1-문자열2, _나무), 
    숲_내부(문자열2-문자열3, _숲).

?- 나무(_결과,t(a,[t(f,[t(g,[])]),t(c,[]),t(b,[t(d,[]),t(e,[])])])).